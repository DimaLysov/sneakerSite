{"ast":null,"code":"var _s = $RefreshSig$();\nimport React, { createContext, useContext, useState, useEffect } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nconst CartContext = /*#__PURE__*/createContext();\nexport const CartProvider = ({\n  children\n}) => {\n  _s();\n  const [cartItems, setCartItems] = useState(() => {\n    // Загружаем корзину из localStorage при инициализации\n    const savedCart = localStorage.getItem('cart');\n    return savedCart ? JSON.parse(savedCart) : [];\n  });\n\n  // Сохраняем корзину в localStorage при изменении\n  useEffect(() => {\n    localStorage.setItem('cart', JSON.stringify(cartItems));\n  }, [cartItems]);\n  const addToCart = (product, size, color, quantity = 1) => {\n    setCartItems(prevItems => {\n      const existingItem = prevItems.find(item => item.id === product.id && item.size === size && item.color === color);\n      const newItem = {\n        ...product,\n        size,\n        color,\n        quantity,\n        addedAt: new Date().toISOString()\n      };\n      if (existingItem) {\n        toast.success(`Количество \"${product.name}\" обновлено в корзине`, {\n          position: \"top-right\",\n          autoClose: 2000,\n          hideProgressBar: false,\n          closeOnClick: true,\n          pauseOnHover: true,\n          draggable: true,\n          progress: undefined\n        });\n        return prevItems.map(item => item.id === product.id && item.size === size && item.color === color ? {\n          ...item,\n          quantity: item.quantity + quantity\n        } : item);\n      }\n      toast.success(`\"${product.name}\" добавлен в корзину!`, {\n        position: \"top-right\",\n        autoClose: 2000,\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: true,\n        draggable: true,\n        progress: undefined\n      });\n      return [...prevItems, newItem];\n    });\n  };\n};\n_s(CartProvider, \"KCsduSxbPkk7brRY0VD084jvUaA=\");\n_c = CartProvider;\nvar _c;\n$RefreshReg$(_c, \"CartProvider\");","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","motion","AnimatePresence","toast","CartContext","CartProvider","children","_s","cartItems","setCartItems","savedCart","localStorage","getItem","JSON","parse","setItem","stringify","addToCart","product","size","color","quantity","prevItems","existingItem","find","item","id","newItem","addedAt","Date","toISOString","success","name","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","map","_c","$RefreshReg$"],"sources":["C:/Users/makakus/repos/react-start/src/cartContext.js"],"sourcesContent":["import React, { createContext, useContext, useState, useEffect } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\n\r\nconst CartContext = createContext();\r\n\r\nexport const CartProvider = ({ children }) => {\r\n  const [cartItems, setCartItems] = useState(() => {\r\n    // Загружаем корзину из localStorage при инициализации\r\n    const savedCart = localStorage.getItem('cart');\r\n    return savedCart ? JSON.parse(savedCart) : [];\r\n  });\r\n\r\n  // Сохраняем корзину в localStorage при изменении\r\n  useEffect(() => {\r\n    localStorage.setItem('cart', JSON.stringify(cartItems));\r\n  }, [cartItems]);\r\n\r\n  const addToCart = (product, size, color, quantity = 1) => {\r\n    setCartItems(prevItems => {\r\n      const existingItem = prevItems.find(\r\n        item => item.id === product.id && item.size === size && item.color === color\r\n      );\r\n      \r\n      const newItem = {\r\n        ...product, \r\n        size, \r\n        color, \r\n        quantity,\r\n        addedAt: new Date().toISOString()\r\n      };\r\n  \r\n      if (existingItem) {\r\n        toast.success(`Количество \"${product.name}\" обновлено в корзине`, {\r\n          position: \"top-right\",\r\n          autoClose: 2000,\r\n          hideProgressBar: false,\r\n          closeOnClick: true,\r\n          pauseOnHover: true,\r\n          draggable: true,\r\n          progress: undefined,\r\n        });\r\n        \r\n        return prevItems.map(item =>\r\n          item.id === product.id && item.size === size && item.color === color\r\n            ? { ...item, quantity: item.quantity + quantity }\r\n            : item\r\n        );\r\n      }\r\n      \r\n      toast.success(`\"${product.name}\" добавлен в корзину!`, {\r\n        position: \"top-right\",\r\n        autoClose: 2000,\r\n        hideProgressBar: false,\r\n        closeOnClick: true,\r\n        pauseOnHover: true,\r\n        draggable: true,\r\n        progress: undefined,\r\n      });\r\n  \r\n      return [...prevItems, newItem];\r\n    });\r\n  };\r\n};\r\n\r\n"],"mappings":";AAAA,OAAOA,KAAK,IAAIC,aAAa,EAAEC,UAAU,EAAEC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAC7E,SAASC,MAAM,EAAEC,eAAe,QAAQ,eAAe;AACvD,SAASC,KAAK,QAAQ,gBAAgB;AACtC,OAAO,uCAAuC;AAE9C,MAAMC,WAAW,gBAAGP,aAAa,CAAC,CAAC;AAEnC,OAAO,MAAMQ,YAAY,GAAGA,CAAC;EAAEC;AAAS,CAAC,KAAK;EAAAC,EAAA;EAC5C,MAAM,CAACC,SAAS,EAAEC,YAAY,CAAC,GAAGV,QAAQ,CAAC,MAAM;IAC/C;IACA,MAAMW,SAAS,GAAGC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC;IAC9C,OAAOF,SAAS,GAAGG,IAAI,CAACC,KAAK,CAACJ,SAAS,CAAC,GAAG,EAAE;EAC/C,CAAC,CAAC;;EAEF;EACAV,SAAS,CAAC,MAAM;IACdW,YAAY,CAACI,OAAO,CAAC,MAAM,EAAEF,IAAI,CAACG,SAAS,CAACR,SAAS,CAAC,CAAC;EACzD,CAAC,EAAE,CAACA,SAAS,CAAC,CAAC;EAEf,MAAMS,SAAS,GAAGA,CAACC,OAAO,EAAEC,IAAI,EAAEC,KAAK,EAAEC,QAAQ,GAAG,CAAC,KAAK;IACxDZ,YAAY,CAACa,SAAS,IAAI;MACxB,MAAMC,YAAY,GAAGD,SAAS,CAACE,IAAI,CACjCC,IAAI,IAAIA,IAAI,CAACC,EAAE,KAAKR,OAAO,CAACQ,EAAE,IAAID,IAAI,CAACN,IAAI,KAAKA,IAAI,IAAIM,IAAI,CAACL,KAAK,KAAKA,KACzE,CAAC;MAED,MAAMO,OAAO,GAAG;QACd,GAAGT,OAAO;QACVC,IAAI;QACJC,KAAK;QACLC,QAAQ;QACRO,OAAO,EAAE,IAAIC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC;MAClC,CAAC;MAED,IAAIP,YAAY,EAAE;QAChBpB,KAAK,CAAC4B,OAAO,CAAC,eAAeb,OAAO,CAACc,IAAI,uBAAuB,EAAE;UAChEC,QAAQ,EAAE,WAAW;UACrBC,SAAS,EAAE,IAAI;UACfC,eAAe,EAAE,KAAK;UACtBC,YAAY,EAAE,IAAI;UAClBC,YAAY,EAAE,IAAI;UAClBC,SAAS,EAAE,IAAI;UACfC,QAAQ,EAAEC;QACZ,CAAC,CAAC;QAEF,OAAOlB,SAAS,CAACmB,GAAG,CAAChB,IAAI,IACvBA,IAAI,CAACC,EAAE,KAAKR,OAAO,CAACQ,EAAE,IAAID,IAAI,CAACN,IAAI,KAAKA,IAAI,IAAIM,IAAI,CAACL,KAAK,KAAKA,KAAK,GAChE;UAAE,GAAGK,IAAI;UAAEJ,QAAQ,EAAEI,IAAI,CAACJ,QAAQ,GAAGA;QAAS,CAAC,GAC/CI,IACN,CAAC;MACH;MAEAtB,KAAK,CAAC4B,OAAO,CAAC,IAAIb,OAAO,CAACc,IAAI,uBAAuB,EAAE;QACrDC,QAAQ,EAAE,WAAW;QACrBC,SAAS,EAAE,IAAI;QACfC,eAAe,EAAE,KAAK;QACtBC,YAAY,EAAE,IAAI;QAClBC,YAAY,EAAE,IAAI;QAClBC,SAAS,EAAE,IAAI;QACfC,QAAQ,EAAEC;MACZ,CAAC,CAAC;MAEF,OAAO,CAAC,GAAGlB,SAAS,EAAEK,OAAO,CAAC;IAChC,CAAC,CAAC;EACJ,CAAC;AACH,CAAC;AAACpB,EAAA,CAzDWF,YAAY;AAAAqC,EAAA,GAAZrC,YAAY;AAAA,IAAAqC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}